let ySpacing,waveWidth,amplitude,dx,sinValues,padding,dropThreshold,xSpacing=16,theta=0,frequency=.0033,renderLines=!1,pointWidth=8,speed=.02,dropSpeed=18;p5.disableFriendlyErrors=!0;let animHeight,animWidth,cnv,currMils=0,prevMils=0,waveOffset=0;function setWindow(){"undefined"==typeof parentId?(animHeight=windowHeight,animWidth=windowWidth):(animHeight=document.getElementById(parentId).clientHeight,animWidth=document.getElementById(parentId).clientWidth,cnv=createCanvas(animWidth,animHeight),cnv.parent(parentId))}function setup(){setWindow(),initConstants(),sinValues=Array(floor(waveWidth/xSpacing)),squareValues=Array(floor(waveWidth/xSpacing)),triangleValues=Array(floor(waveWidth/xSpacing)),sawValues=Array(floor(waveWidth/xSpacing))}function windowResized(){setup()}function initConstants(){waveWidth=width+16,ySpacing=animHeight/4,padding=animHeight/20,amplitude=animHeight/20,dropThreshold=.97*PI,dx=TWO_PI*frequency*xSpacing,waveOffset=animHeight/30}function timerStart(){prevMils=millis()}function timerPrint(a){currMils=millis()-prevMils,prevMils=currMils,print(1e3*currMils+"- "+a+"\n")}function draw(){background("#2c3e50"),calcSin(theta),calcSquare(theta),calcTriangle(theta),calcSaw(theta),renderWaves(),theta+=speed%TWO_PI}function calcSin(a){let b=a;for(let c=0;c<sinValues.length;c++)sinValues[c]=-(sin(b)*amplitude),b+=dx}function calcSquare(a){var b=Math.max,c=Math.min;let d=a%TWO_PI;for(let e=0;e<squareValues.length;e++)d>dropThreshold&&d<PI?(squareValues[e]+=speed*dropSpeed*amplitude,squareValues[e]=c(squareValues[e],amplitude)):d>2*dropThreshold&&d<TWO_PI?(squareValues[e]+=-speed*dropSpeed*amplitude,squareValues[e]=b(squareValues[e],-amplitude)):d>=PI?squareValues[e]=amplitude:squareValues[e]=-amplitude,d=(d+dx)%TWO_PI}function calcTriangle(a){let b=a%TWO_PI,c=2*amplitude/PI;for(let d=0;d<triangleValues.length;d++)triangleValues[d]=b<HALF_PI?-(c*b):b<PI?c*b-2*amplitude:b<3*HALF_PI?c*b-2*amplitude:-(c*b)+4*amplitude,b=(b+dx)%TWO_PI}function calcSaw(a){var b=Math.min;let c=a%TWO_PI,d=amplitude/PI;for(let e=0;e<sawValues.length;e++)c>dropThreshold&&c<PI?(sawValues[e]+=speed*dropSpeed*amplitude,sawValues[e]=b(squareValues[e],amplitude)):c<=PI?sawValues[e]=-(d*c):sawValues[e]=-(d*c-2*amplitude),c=(c+dx)%TWO_PI}function renderWaves(){renderSin(padding+amplitude-waveOffset,"#1abc9c"),renderSquare(padding+amplitude+ySpacing-waveOffset,"#bc1a7b"),renderTriangle(padding+amplitude+2*ySpacing+waveOffset,"#bc3a1a"),renderSaw(padding+amplitude+3*ySpacing+waveOffset,"#bc8b1a")}function renderSin(a,b){strokeWeight(6);for(let c=0;c<sinValues.length;c++)fill(color(b)),stroke(color(b)),ellipse(c*xSpacing,sinValues[c]+a,pointWidth,pointWidth),0<c&&renderLines&&line((c-1)*xSpacing,sinValues[c-1]+a,c*xSpacing,sinValues[c]+a)}function renderSquare(a,b){for(let c=0;c<sinValues.length;c++)fill(color(b)),stroke(color(b)),ellipse(c*xSpacing,squareValues[c]+a,pointWidth,pointWidth),0<c&&renderLines&&squareValues[c-1]==squareValues[c]&&line((c-1)*xSpacing,squareValues[c-1]+a,c*xSpacing,squareValues[c]+a)}function renderTriangle(a,b){for(let c=0;c<sinValues.length;c++)fill(color(b)),stroke(color(b)),ellipse(c*xSpacing,triangleValues[c]+a,pointWidth,pointWidth),0<c&&renderLines&&line((c-1)*xSpacing,triangleValues[c-1]+a,c*xSpacing,triangleValues[c]+a)}function renderSaw(a,b){for(let c=0;c<sinValues.length;c++)fill(color(b)),stroke(color(b)),ellipse(c*xSpacing,sawValues[c]+a,pointWidth,pointWidth),0<c&&renderLines&&abs(sawValues[c-1]-sawValues[c])<=.15*amplitude&&line((c-1)*xSpacing,sawValues[c-1]+a,c*xSpacing,sawValues[c]+a)}